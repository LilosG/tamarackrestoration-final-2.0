---
/**
 * RealResults Section Component
 * =============================
 * Showcase of completed projects with team photos
 * Builds trust by showing real work in local communities
 */

import Icon from '@/components/ui/Icon.astro';
import Button from '@/components/ui/Button.astro';
import { business, cities } from '@/data/site';

interface Props {
  class?: string;
  title?: string;
  subtitle?: string;
  showCTA?: boolean;
}

const {
  class: className,
  title = 'Real Results for Carlsbad Homes & Businesses',
  subtitle = "See how we've helped your neighbors recover from water damage, fire, mold, and more.",
  showCTA = true,
} = Astro.props;

// Featured project data - can be expanded to pull from a data file
const featuredProject = {
  image: '/images/team/team-at-work.webp',
  location: 'Carlsbad',
  type: 'Water Damage Restoration',
  description: 'Complete water extraction and structural drying for a Carlsbad family after a burst pipe flooded their living room.',
};

// Cities served for the location tags
const featuredCities = cities.filter(c => c.tier === 1 || c.tier === 2).slice(0, 6);
---

<section class:list={['real-results section', className]}>
  <div class="container">
    <div class="grid lg:grid-cols-2 gap-12 items-center">
      {/* Content Side */}
      <div>
        <div class="inline-flex items-center gap-2 bg-brand-orange-100 text-brand-orange px-4 py-2 rounded-full text-body-sm font-semibold mb-4">
          <Icon name="star" size="sm" />
          Proven Track Record
        </div>
        
        <h2 class="font-display text-display-lg text-brand-black mb-4">
          {title}
        </h2>
        
        <p class="text-body-lg text-brand-gray mb-8">
          {subtitle}
        </p>
        
        {/* Project Stats */}
        <div class="grid grid-cols-2 gap-6 mb-8">
          <div class="text-center p-4 bg-brand-cream-200 rounded-xl">
            <p class="font-display text-3xl text-brand-orange mb-1">{business.yearsInBusiness}+</p>
            <p class="text-body-sm text-brand-gray">Years Serving<br/>North San Diego County</p>
          </div>
          <div class="text-center p-4 bg-brand-cream-200 rounded-xl">
            <p class="font-display text-3xl text-brand-orange">2,500+</p>
            <p class="text-body-sm text-brand-gray">Properties<br/>Restored</p>
          </div>
          <div class="text-center p-4 bg-brand-cream-200 rounded-xl">
            <p class="font-display text-3xl text-brand-orange">{business.rating}</p>
            <p class="text-body-sm text-brand-gray">Google<br/>Rating</p>
          </div>
          <div class="text-center p-4 bg-brand-cream-200 rounded-xl">
            <p class="font-display text-3xl text-brand-orange">100%</p>
            <p class="text-body-sm text-brand-gray">Satisfaction<br/>Guarantee</p>
          </div>
        </div>
        
        {showCTA && (
          <div class="flex flex-wrap gap-4">
            <Button href="/contact/" variant="primary">
              Get Your Free Estimate
              <Icon name="arrow-right" size="sm" />
            </Button>
            <Button href="/about/" variant="outline">
              Learn About Our Team
            </Button>
          </div>
        )}
      </div>
      
      {/* Image Side */}
      <div class="relative">
        {/* Main Project Image */}
        <div class="relative rounded-2xl overflow-hidden shadow-soft-xl">
          <img 
            src={featuredProject.image}
            alt="Tamarack Restoration team completing a restoration project"
            class="w-full aspect-[4/3] object-cover"
            loading="lazy"
          />
          
          {/* Project Info Overlay */}
          <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-brand-black/90 via-brand-black/60 to-transparent p-6 pt-16">
            <div class="flex items-center gap-2 text-white/80 text-sm mb-2">
              <Icon name="map-pin" size="sm" class="text-brand-orange" />
              {featuredProject.location}
              <span class="mx-2">â€¢</span>
              {featuredProject.type}
            </div>
            <p class="text-white text-body-md">
              {featuredProject.description}
            </p>
          </div>
        </div>
        
        {/* Location Tags */}
        <div class="absolute -bottom-4 -right-4 bg-white rounded-xl shadow-card p-4 max-w-[200px]">
          <p class="text-body-xs text-brand-gray mb-2 font-semibold">Serving:</p>
          <div class="flex flex-wrap gap-1">
            {featuredCities.map((city) => (
              <span class="text-body-xs bg-brand-cream-200 text-brand-black px-2 py-1 rounded">
                {city.name}
              </span>
            ))}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
