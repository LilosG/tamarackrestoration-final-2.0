---
/**
 * FAQ Page
 * ========
 * Comprehensive FAQ page with proper FAQPage schema for SEO/AEO
 * Organized by category for user experience
 * Schema covers ALL questions for AI/search optimization
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import Icon from '@/components/ui/Icon.astro';
import Accordion from '@/components/ui/Accordion.astro';
import Button from '@/components/ui/Button.astro';
import { business } from '@/data/site';
import { allFaqs, faqCategories } from '@/data/faqs';
import { getCanonicalUrl, getBreadcrumbSchema, getFAQSchema } from '@/utils/seo';

const title = 'Frequently Asked Questions | Tamarack Restoration';
const description = `Get answers to common questions about water damage restoration, mold removal, fire damage repair, insurance claims, and our 24/7 emergency services in North San Diego County.`;
const canonical = getCanonicalUrl('/about/faq/');

const breadcrumbs = [
  { label: 'Home', href: '/' },
  { label: 'About', href: '/about/' },
  { label: 'FAQ', href: '/about/faq/', current: true },
];

const breadcrumbSchema = getBreadcrumbSchema(breadcrumbs);

// Generate FAQPage schema with ALL questions for maximum AEO coverage
const faqSchema = getFAQSchema(allFaqs);

// Combine schemas
const jsonLd = [breadcrumbSchema, faqSchema];
---

<BaseLayout 
  title={title}
  description={description}
  canonical={canonical}
  jsonLd={jsonLd}
>
  <!-- Hero -->
  <section class="relative bg-brand-black overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-brand-black via-brand-black/95 to-brand-orange/20"></div>
    
    <div class="container relative py-16 lg:py-20">
      <div class="max-w-3xl">
        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-heading font-bold text-white mb-6 leading-[1.1] tracking-tight">
          Frequently Asked{' '}
          <span class="text-brand-orange">Questions</span>
        </h1>
        
        <p class="text-brand-cream-300 text-lg lg:text-xl mb-8 max-w-xl leading-relaxed">
          Find answers to common questions about our restoration services, insurance process, and what to expect when disaster strikes.
        </p>
        
        <div class="flex flex-wrap items-center gap-4">
          <a 
            href={`tel:${business.phone}`}
            class="inline-flex items-center gap-2 bg-brand-orange text-white font-semibold px-6 py-3 rounded-lg hover:bg-brand-orange-600 transition-colors"
          >
            <Icon name="phone" size="sm" />
            {business.phoneFormatted}
          </a>
          <span class="text-brand-cream-400">Available 24/7 for emergencies</span>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Quick Jump Navigation -->
  <section class="py-6 bg-white border-b border-brand-cream-300 sticky top-0 z-40">
    <div class="container">
      <div class="flex flex-wrap items-center justify-center gap-2">
        {faqCategories.map((category) => (
          <a 
            href={`#${category.id}`}
            class="px-4 py-2 text-sm font-medium text-brand-gray hover:text-brand-orange hover:bg-brand-cream-200 rounded-full transition-colors"
          >
            {category.name}
          </a>
        ))}
      </div>
    </div>
  </section>
  
  <!-- FAQ Categories -->
  <section class="section bg-brand-cream-200">
    <div class="container">
      <div class="max-w-4xl mx-auto space-y-12">
        {faqCategories.map((category) => (
          <div id={category.id} class="scroll-mt-24">
            <h2 class="font-heading text-2xl md:text-3xl font-bold text-brand-black mb-6 flex items-center gap-3">
              <span class="w-10 h-10 rounded-xl bg-brand-orange text-white flex items-center justify-center">
                <Icon name="help-circle" size="md" />
              </span>
              {category.name}
            </h2>
            
            <div class="bg-white rounded-xl shadow-soft overflow-hidden">
              {category.faqs.map((faq, index) => (
                <details 
                  class="group border-b border-brand-cream-300 last:border-b-0"
                  open={index === 0}
                >
                  <summary class="flex items-center justify-between gap-4 px-6 py-5 cursor-pointer list-none hover:bg-brand-cream-100 transition-colors">
                    <h3 class="font-heading font-semibold text-brand-black text-left pr-4">
                      {faq.question}
                    </h3>
                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-cream-200 flex items-center justify-center group-open:bg-brand-orange group-open:text-white transition-colors">
                      <Icon name="chevron-down" size="sm" class="transform group-open:rotate-180 transition-transform" />
                    </span>
                  </summary>
                  <div class="px-6 pb-5">
                    <p class="text-brand-gray leading-relaxed">
                      {faq.answer}
                    </p>
                  </div>
                </details>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <!-- Still Have Questions CTA -->
  <section class="section bg-white">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="font-heading text-3xl md:text-4xl font-bold text-brand-black mb-4">
          Still Have Questions?
        </h2>
        <p class="text-lg text-brand-gray mb-8">
          Can't find the answer you're looking for? Our team is here to help 24/7.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button href={`tel:${business.phone}`} variant="primary" size="lg">
            <Icon name="phone" size="sm" />
            Call {business.phoneFormatted}
          </Button>
          <Button href="/contact/" variant="outline" size="lg">
            Send Us a Message
            <Icon name="arrow-right" size="sm" />
          </Button>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Related Links -->
  <section class="py-12 bg-brand-cream-200">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <h2 class="font-heading text-xl font-bold text-brand-black mb-6 text-center">
          Learn More About Our Services
        </h2>
        <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
          <a href="/services/water-damage-restoration/" class="group flex items-center gap-3 p-4 bg-white rounded-lg hover:bg-brand-orange transition-colors">
            <Icon name="droplet" size="md" class="text-brand-orange group-hover:text-white" />
            <span class="font-semibold text-brand-black group-hover:text-white">Water Damage</span>
          </a>
          <a href="/services/mold-removal/" class="group flex items-center gap-3 p-4 bg-white rounded-lg hover:bg-brand-orange transition-colors">
            <Icon name="wind" size="md" class="text-brand-orange group-hover:text-white" />
            <span class="font-semibold text-brand-black group-hover:text-white">Mold Removal</span>
          </a>
          <a href="/services/fire-damage-restoration/" class="group flex items-center gap-3 p-4 bg-white rounded-lg hover:bg-brand-orange transition-colors">
            <Icon name="flame" size="md" class="text-brand-orange group-hover:text-white" />
            <span class="font-semibold text-brand-black group-hover:text-white">Fire Damage</span>
          </a>
          <a href="/insurance/" class="group flex items-center gap-3 p-4 bg-white rounded-lg hover:bg-brand-orange transition-colors">
            <Icon name="shield" size="md" class="text-brand-orange group-hover:text-white" />
            <span class="font-semibold text-brand-black group-hover:text-white">Insurance Help</span>
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
